<!DOCTYPE html>
<html lang='en-US'>
  <head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="icon" href="../assets/favicon.ico" type="image/x-icon"/>
    <title> Friend Finder Survey </title>

    <!-- CSS -->
    <!-- Bootstrap -->
    <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css' integrity='sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T' crossorigin='anonymous'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Scripts -->
    <!-- jQuery -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <!-- Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
    <!-- Style -->
    <style>
      input[type=radio] {
        width: 16px;
        height: 16px;
      }
    </style>
  </head>

  <body>
      <div class="container">
        <h1> Survey Questions </h1>
        <hr/>
        <h2><strong> About You </strong></h2>
        <form method="POST" role="form">
          <!-- Name Form -->
          <div class="form-group">
            <label for="name"> Name (Required) </label>
            <input type="name" class="form-control" id="nameInput" placeholder="John Doe">
          </div>
          <!-- Photo Form -->
          <div class="form-group">
            <label for="photo"> Link to Photo Image (Required) </label>
            <input type="text" class="form-control" id="photoInput" placeholder="https://via.placeholder.com/150.png/09f/fff">
          </div>
  
          <hr/>

          <div class="text-center" id="ratings">
            <span style="font-size: 24px; font-weight: bold; padding-right: 20px"> 1 </span>
            <span style="font-size: 24px; font-weight: bold; padding-right: 20px"> - </span>
            <span style="font-size: 24px; font-weight: bold; padding-right: 20px"> - </span>
            <span style="font-size: 24px; font-weight: bold; padding-right: 20px"> - </span>
            <span style="font-size: 24px; font-weight: bold"> 5 </span>
            <p style="font-size: 15px; font-weight: bold"> (Strongly Disagree) <span style="padding-right: 20px"></span> (Strongly Agree) </p>
          </div>

          <!-- New Row -->
          <div class="row justify-content-center">
            <!-- Question One -->
            <div class="card col-md-5 col-sm-12 mr-md-1 mr-sm-0 mb-md-0 mb-sm-1 text-center q1">
              <div class="card-body">
                <h4> Question One </h4>
              
                <p id="ques1"> You enjoy meeting new people. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question1" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question1" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question1" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question1" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question1" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question One -->
            </div>

            <!-- Question Two -->
            <div class="card col-md-5 col-sm-12 ml-md-1 ml-sm-0 mt-md-0 mt-sm-1 text-center q2">
              <div class="card-body">
                <h4> Question Two </h4>
              
                <p id="ques2"> You enjoy trying new things. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question2" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question2" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question2" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question2" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question2" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Two -->
            </div>
          <!-- End Row -->
          </div>

          <!-- New Row -->
          <div class="row mt-2 justify-content-center">
            <!-- Question Three -->
            <div class="card col-md-5 col-sm-12 mr-md-1 mr-sm-0 mb-md-0 mb-sm-1 text-center q3">
              <div class="card-body">
                <h4> Question Three </h4>
              
                <p id="ques3"> You consider other's feelings. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question3" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question3" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question3" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question3" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question3" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Three -->
            </div>

            <!-- Question Four -->
            <div class="card col-md-5 col-sm-12 ml-md-1 ml-sm-0 mt-md-0 mt-sm-1 text-center q4">
              <div class="card-body">
                <h4> Question Four </h4>
              
                <p id="ques4"> You conceal your feelings. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question4" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question4" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question4" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question4" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question4" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Four -->
            </div>
          <!-- End Row -->
          </div>

          <!-- New Row -->
          <div class="row mt-2 justify-content-center">
            <!-- Question Five -->
            <div class="card col-md-5 col-sm-12 mr-md-1 mr-sm-0 mb-md-0 mb-sm-1 text-center q5">
              <div class="card-body">
                <h4> Question Five </h4>
              
                <p id="ques5"> You get nervous before big events. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question5" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question5" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question5" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question5" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question5" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Five -->
            </div>

            <!-- Question Six -->
            <div class="card col-md-5 col-sm-12 ml-md-1 ml-sm-0 mt-md-0 mt-sm-1 text-center q6">
              <div class="card-body">
                <h4> Question Six </h4>
              
                <p id="ques6"> You prefer long-term goals to short-term. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question6" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question6" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question6" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question6" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question6" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Six -->
            </div>
          <!-- End Row -->
          </div>

          <!-- New Row -->
          <div class="row mt-2 justify-content-center">
            <!-- Question Seven -->
            <div class="card col-md-5 col-sm-12 mr-md-1 mr-sm-0 mb-md-0 mb-sm-1 text-center q7">
              <div class="card-body">
                <h4> Question Seven </h4>
              
                <p id="ques7"> You prefer time alone or in small groups. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question7" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question7" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question7" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question7" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question7" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Seven -->
            </div>

            <!-- Question Eight -->
            <div class="card col-md-5 col-sm-12 ml-md-1 ml-sm-0 mt-md-0 mt-sm-1 text-center q8">
              <div class="card-body">
                <h4> Question Eight </h4>
              
                <p id="ques8"> You prefer intelligence over looks. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question8" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question8" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question8" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question8" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question8" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Eight -->
            </div>
          <!-- End Row -->
          </div>

          <!-- New Row -->
          <div class="row mt-2 justify-content-center">
            <!-- Question Nine -->
            <div class="card col-md-5 col-sm-12 mr-md-1 mr-sm-0 mb-md-0 mb-sm-1 text-center q9">
              <div class="card-body">
                <h4> Question Nine </h4>
              
                <p id="ques9"> You enjoy taking risks. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question9" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question9" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question9" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question9" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question9" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Nine -->
            </div>

            <!-- Question Ten -->
            <div class="card col-md-5 col-sm-12 ml-md-1 ml-sm-0 mt-md-0 mt-sm-1 text-center q10">
              <div class="card-body">
                <h4> Question Ten </h4>
              
                <p id="ques10"> You prefer dogs over cats. </p>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question10" id="inlineRadio1" value="1">
                  <label class="form-check-label" for="inlineRadio1"> 1 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question10" id="inlineRadio2" value="2">
                  <label class="form-check-label" for="inlineRadio2"> 2 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question10" id="inlineRadio3" value="3">
                  <label class="form-check-label" for="inlineRadio3"> 3 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question10" id="inlineRadio4" value="4">
                  <label class="form-check-label" for="inlineRadio4"> 4 </label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="question10" id="inlineRadio5" value="5">
                  <label class="form-check-label" for="inlineRadio5"> 5 </label>
                </div>
              </div>
            <!-- End Question Ten -->
            </div>
          <!-- End Row -->
          </div>

          <br/>

          <div class="text-center">
            <button type="submit" class="btn btn-success btn-md submit" id="findBtn"> Find Me a Friend! </button>
          </div>

          <br/>
        <!-- End Form -->
        </form>

        <!-- Friend Modal -->
        <div class="modal fade" id="friendModal" tabindex="-1" role="dialog" aria-labelledby="friendModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="friendModalLabel"> Your Friend Match </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body text-center" id="friendModalBody">
              </div>
            </div>
          </div>
        <!-- End Friend Modal -->
        </div>

        <!-- Alert Modal -->
        <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="alertTitle"> Oops, you missed something! </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <span id="alertText"></span>
              </div>
            </div>
          </div>
        <!-- End Alert Modal -->
        </div>
      <!-- End Container -->
      </div>

      <!-- Script -->
      <script type="text/javascript">
        var newFriend = {
          name: "",
          photo: "",
          scores: [],
        }

        // Go through and get the answers from user
        function pushScores(e) {
          e.preventDefault();

          // Go through all the questions
          for (var i = 1; i < 11; i++) {
            // Grab the name for each group of input buttons per question
            var radioChecked = $("input[name='question" + i + "']:checked").val();
            
            // If none of the inputs are checked or name/photo are not entered
            if (!radioChecked || $("#nameInput").val().trim() === "" || $("#photoInput").val().trim() === "") {
              var alertText = $("#alertText")
              alertText.html("");

              // If no name is entered, highlight red
              if ($("#nameInput").val().trim() === "") {
                $("#nameInput").css("border", "1px solid red");
                alertText.append("How are you going to make friends without a name? <br/><br/>");
              }
              else {
                $("#nameInput").css("border", "1px solid #ced4da")
              }

              // If no photo is entered, highlight red
              if ($("#photoInput").val().trim() === "") {
                $("#photoInput").css("border", "1px solid red");
                alertText.append("You need to add a photo! Let your new friend see your pretty face :D <br/><br/>");
              }
              else {
                $("#photoInput").css("border", "1px solid #ced4da")
              }

              // If question isn't answered, highlight red
              for (var q = 0; q < 11; q++) {
                var radioValue = $("input[name='question" + q + "']:checked").val();
                
                if (radioValue === undefined) {
                  $(".q" + q).css("border", "1px solid red")
                }
                else {
                  $(".q" + q).css("border", "1px solid rgba(0,0,0,.125)")
                }
              }
              // Alert user there's unanswered questions
              alertText.append("We can't match you if we don't know <strong> everything </strong> about you! Please answer all the questions! <br/>")

              // Show Modal
              $('#alertModal').modal('show');
              return;
            }
            // If user selected an input, push to scores array
            else if (radioChecked && $("#nameInput").val().trim() !== "" && $("#photoInput").val().trim() !== "") {
              newFriend.scores.push(parseInt(radioChecked))
            };
          };
          pushFriendData();
        }

        // Get the rest of the data and post to server
        function pushFriendData() {
          // Get name
          newFriend.name = toTitleCase($("#nameInput").val().trim());
          // Get photo
          newFriend.photo = $("#photoInput").val().trim();

          // Change name to proper case
          function toTitleCase(str) {
            str = str.toLowerCase().split(' ');
            for (var i = 0; i < str.length; i++) {
              str[i] = str[i].charAt(0).toUpperCase() + str[i].slice(1);
            }
            return str.join(' ');
          };

          // Post to server
          $.post("/api/friends", newFriend, function(data) {
            console.log(data)
            var modalBody = $("#friendModalBody");
            modalBody.html = "";

            var friendName = "<p> Friend Name: <strong>" + data.name + "</strong></p><br/>"
            var friendImg = "<img src='" + data.photo + "' alt='friend headshot'></img>"
            // Show friend name
            modalBody.append(friendName);
            // Show friend image
            modalBody.append(friendImg);
            // Show friend modal
            $('#friendModal').modal('show');
          })

          $("#nameInput").val("");
          $("#photoInput").val("");
          for (var n = 1; n < 11; n++) {
            $("input[name='question" + n + "']").prop("checked", false);
          }
        }

        // Call pushScores function on button click
        $("#findBtn").on("click", pushScores)
      </script>
  </body>

</html>